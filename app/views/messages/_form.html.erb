<%= form_for(@message) do |f| %>
  <% if @message.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@message.errors.count, "error") %> prohibited this message from being saved:</h2>

      <ul>
      <% @message.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <% # see https://github.com/Nerian/bootstrap-datepicker-rails for datepicker %>

  	<div class="alert alert-block">
	  <button type="button" class="close" data-dismiss="alert">x</button>
	  <p>Please note: All reminders are public</p>
	</div>	
  
  
  <div class="field">

	<script language="javascript">
	$(document).on("focus", "[data-behaviour~='datepicker']", function(e){
		$(this).datepicker({"format": "dd-M-yyyy", "weekStart": 1, "autoclose": true});
	});
	</script>
	
	<div class="input-prepend">
	  <span class="add-on">When:</span>
	  <input type="text" data-behaviour='datepicker' 
	     name="message[send_at_date]"
	     value="<%= (@message.send_at ? @message.send_at : Time.now).strftime("%d-%b-%Y") %>" >
	</div>
  </div>

  <div class="field">
    <div class="input-prepend">
	<span class="add-on">To: <i class="icon-envelope"></i></span>
	<%= f.text_field :send_to, class: "span4" %>
	</div>
  </div>
  
  <div class="field">
    <div class="input-prepend">
	<span class="add-on">Subject:</span>
    <%= f.text_field :subject, class: "span7" %>
	</div>
  </div>
  <div class="field">
    <%= f.label :body %>
    <%= f.text_area :body , class: "span11" %>
  </div>
  <div class="actions">
    <%= f.submit class: "btn btn-success" %>
  </div>
  
<% end %>
